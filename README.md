# Basic NGINX docker-compose

## Features:
* Use syslog driver to log all container messages to docker host syslog
* Log NGINX access/error logs to syslog
* Provide a boilerplate static page that uses WHOI branding
* Use mounts for web content and configuration data

### Example logging output
Within the Docker host syslog, messages for the container will be generated based on the setting of the syslog tag in the docker-compose file.

With the included tag of `tag: "nginx_{{.ID}}"`, you will see the `nginx_` prefix coupled with the running container ID at the start of every syslog message generated by the running container.

Since we can't count on a predictable and uniform syslog configuration on every host, we log Docker container process messages, nginx access, and nginx error logs together within the syslog tag.  We can easily discern between the three based on the format of the message, though.

**Daemon messages look like this**
```
Feb 11 14:06:00 dockerhost.college.edu nginx_a68ce560f764[5174]: 2021/02/11 14:06:00 [notice] 1#1: nginx/1.19.6
```

**NGINX error messages look like this**
```
Feb 11 14:06:08 dockerhost.college.edu nginx_a68ce560f764[5174]: 2021/02/11 14:06:08 [error] 21#21: *1 open() "/usr/share/nginx/html/igehebgge" failed (2: No such file or directory), client: 10.123.234.123, server: localhost, request: "GET /igehebgge HTTP/1.1", host: "dockerhost.college.edu"
```

**NGINX access message look like this**
```
Feb 11 14:07:58 dockerhost.college.edu nginx_a68ce560f764[5174]: 10.123.234.123 - - [11/Feb/2021:14:07:58 +0000] "GET / HTTP/1.1" 200 665 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:85.0) Gecko/20100101 Firefox/85.0"
```

If you'd like to play with logging driver tags based off of docker template markup, there are toher special values you can use, documented here: https://docs.docker.com/config/containers/logging/log_tags/
